Multiple Sensor Configuration File
==================================

`liveserial` can handle multiple serial ports simultaneously, as well as
multiple sensor streams per serial port. Since each device can have a different
data format arriving at the serial port, we need a way for the user to specify
what to expect for each sensor.

An example file is in the repo (see :download:`sensors.cfg
<../liveserial/sensors.cfg>`).

Sensor Configuration Options
----------------------------

Each sensor has its own section and should be labelled `[sensor.name]`, where
`name` is the user-defined sensor name. This sensor name is also used as the
name for the CSV files that are generated by the logging. Then, the following
possible options can be specified as `key=value` pairs:

- **key** text that identifies this sensor when it is part of a multi-sensor
  stream on a single port.
- **format** comma-separated list of python data types (`str`, `int`, `float`)
  and `key` to specify the column location that the key will be at.
- **port** name of the serial port on the local machine that this sensor's data
  will arive at.
- **label** for plotting, what label to include on the `y` axis.
- **value_index** when multiple columns are present, this is the column index
  (0-based) that will be used for plotting.
- **logging** comma-separated list of 0-based column indices to include in the
  log file generated for this sensor.
- **columns** comma-separated list of custom column names to use in the CSV
  files. There should be the same number of entries in *logging* and *columns*.

**Note**: if a *key* is not specified, then one will be auto-generated using the
:meth:`id` of the :class:`~liveserial.monitor.ComMonitorThread` object instance
assigned to the port where the data originated from.
  
Since the config file format is extensible, it is easy to add additional options
later on. The default :class:`~ConfigParser.ConfigParser` is used to extract the
sections (sensors) and their options.

Port Configuration Options
--------------------------

In addition to the sensor configuration, port configuration can be specified
using the same config-file format. Port sections are named `[port.portname]`,
where `portname` is the name of the local port (should exist in the results
returned by :func:`~liveserial.monitor.enumerate_serial_ports`). The following
options are possible:

- **port_baud**: Rate at which information is transferred in a communication
  channel (in bits/second). Default `9600`.
- **port_stopbits**: Serial communication parameter; one of `(1, 1.5, 2)`. Default
  `1`.
- **port_parity**: Serial communication parameter; one of `['N', 'E', 'O', 'M',
  'S']`. Default `N`.
- **port_timeout**: The timeout used for reading the COM port. If this value is
  low, the thread will return data in finer grained chunks, with more
  accurate timestamps, but it will also consume more CPU. Default `0.01`.
- **virtual**: when True, additional serial port parameters are set so that the
  monitor can work with `socat` or other virtual ports. Default `0`.
